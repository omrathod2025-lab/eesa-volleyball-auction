<!DOCTYPE html>
<html>
<head>
<title>EESA Volleyball Auction</title>
<style>
body {
    font-family: Arial;
    background: #0f172a;
    color: white;
    text-align: center;
}

h1 { font-size: 40px; }

.section { margin: 20px; }

button {
    padding: 10px 20px;
    font-size: 16px;
    margin: 5px;
    cursor: pointer;
}

select, input {
    padding: 8px;
    font-size: 15px;
    margin: 5px;
}

.container {
    display: flex;
    justify-content: space-around;
    margin-top: 20px;
}

.team {
    background: #1e293b;
    padding: 15px;
    width: 23%;
    border-radius: 12px;
}

.player-card {
    background: #1e293b;
    padding: 20px;
    border-radius: 15px;
    margin: 20px auto;
    width: 40%;
}

.player-card img {
    width: 180px;
    height: 180px;
    object-fit: cover;
    border-radius: 15px;
    margin-bottom: 10px;
}

.set-display {
    font-size: 22px;
    margin-top: 10px;
    color: #38bdf8;
}
</style>
</head>
<body>

<h1>üèê EESA Volleyball Auction</h1>

<div class="set-display" id="setName"></div>

<div class="player-card" id="currentPlayer">
    Click Next Player to Start
</div>

<div class="section">
    <button onclick="nextPlayer()">Next Player</button><br>
    <input type="number" id="bidAmount" placeholder="Enter Bid (Cr)">
    <select id="teamSelect">
        <option>Team Ian</option>
        <option>Team Navin</option>
        <option>Team Kevin</option>
        <option>Team Shailesh</option>
    </select>
    <button onclick="sellPlayer()">SOLD</button>
</div>

<h2>Teams</h2>
<div class="container">
    <div class="team" id="Team Ian"></div>
    <div class="team" id="Team Navin"></div>
    <div class="team" id="Team Kevin"></div>
    <div class="team" id="Team Shailesh"></div>
</div>

<script>

let purseLimit = 60;

let teams = {
    "Team Ian": { purse: purseLimit, players: [] },
    "Team Navin": { purse: purseLimit, players: [] },
    "Team Kevin": { purse: purseLimit, players: [] },
    "Team Shailesh": { purse: purseLimit, players: [] }
};

let players = [

    {
        name:"Rushikesh Patil",
        year:"BTECH",
        role:"Spiker",
        image:"Rushikesh_Patil_Btech_EE.jpg"
    },

    {
        name:"Shrivardhan Deshmukh",
        year:"TY",
        role:"Libero",
        image:"shrivardhan.jpg"
    }

];

let sets = ["Libero","Setter","Spiker","All-Rounder"];
let currentSetIndex = 0;
let currentPlayerIndex = -1;
let currentSetPlayers = [];

function startSet() {

    if(currentSetIndex >= sets.length) {
        document.getElementById("currentPlayer").innerHTML = "Auction Completed";
        return;
    }

    let role = sets[currentSetIndex];
    document.getElementById("setName").innerHTML = "Current Set: " + role;

    currentSetPlayers = players.filter(p => p.role === role);
    currentPlayerIndex = -1;
}

function nextPlayer() {

    if(currentSetPlayers.length === 0) startSet();

    currentPlayerIndex++;

    if(currentPlayerIndex >= currentSetPlayers.length) {
        currentSetIndex++;
        startSet();
        nextPlayer();
        return;
    }

    let p = currentSetPlayers[currentPlayerIndex];
    let base = (p.year === "FY") ? 1 : 2;

    document.getElementById("currentPlayer").innerHTML =
        "<img src='images/" + p.image + "' onerror=\"this.src='https://via.placeholder.com/180';\">" +
        "<h2>" + p.name + "</h2>" +
        "<p>Role: " + p.role + "</p>" +
        "<p>Year: " + p.year + "</p>" +
        "<p>Base Price: " + base + " Cr</p>";
}

function sellPlayer() {

    let bid = parseFloat(document.getElementById("bidAmount").value);
    let teamName = document.getElementById("teamSelect").value;
    let team = teams[teamName];
    let player = currentSetPlayers[currentPlayerIndex];

    if(!player) return alert("No player selected!");
    if(team.purse < bid) return alert("Not enough purse!");

    team.purse -= bid;
    team.players.push(player.name + " (" + bid + " Cr)");
    updateTeams();

    nextPlayer();
}

function updateTeams() {
    for(let t in teams) {
        document.getElementById(t).innerHTML =
            "<h3>" + t + "</h3>" +
            "<p>Purse: " + teams[t].purse.toFixed(1) + " Cr</p>" +
            teams[t].players.join("<br>");
    }
}

updateTeams();
startSet();

</script>

</body>
</html>
