<!DOCTYPE html>
<html>
<head>
<title>EESA Volleyball Auction</title>
<style>
body {
    font-family: Arial;
    background:#111;
    color:white;
    text-align:center;
}

.container {
    display:flex;
    justify-content:space-around;
    margin-top:20px;
}

.team {
    background:#1e1e1e;
    padding:15px;
    border-radius:15px;
    width:22%;
}

button {
    padding:10px 20px;
    margin:5px;
    border:none;
    border-radius:10px;
    font-weight:bold;
    cursor:pointer;
}

#nextBtn { background:#2196F3; color:white; }
#sellBtn { background:#4CAF50; color:white; }

img {
    width:200px;
    height:200px;
    object-fit:cover;
    border-radius:15px;
    margin-bottom:15px;
}
</style>
</head>

<body>

<h1>EESA Volleyball Auction</h1>
<h2 id="setTitle"></h2>

<div id="playerCard"></div>

<br>

<select id="teamSelect">
    <option>Team Ian</option>
    <option>Team Navin</option>
    <option>Team Kevin</option>
    <option>Team Shailesh</option>
</select>

<input type="number" id="bidAmount" placeholder="Enter Bid (Cr)">
<br>

<button id="sellBtn" onclick="sellPlayer()">Sell Player</button>
<button id="nextBtn" onclick="nextPlayer()">Next Player</button>

<div class="container">
    <div class="team" id="Team Ian"></div>
    <div class="team" id="Team Navin"></div>
    <div class="team" id="Team Kevin"></div>
    <div class="team" id="Team Shailesh"></div>
</div>

<script>

let purseLimit = 60;

let teams = {
    "Team Ian": { purse: purseLimit, players: [] },
    "Team Navin": { purse: purseLimit, players: [] },
    "Team Kevin": { purse: purseLimit, players: [] },
    "Team Shailesh": { purse: purseLimit, players: [] }
};

let players = [
    {name:"Aditya Jadhav", year:"TY", role:"Spiker"},
    {name:"Aditya Thakur", year:"FY", role:"Setter"},
    {name:"Advay Saraf", year:"SY", role:"Libero"},
    {name:"Adwait Deshpande", year:"FY", role:"All-Rounder"},
    {name:"Amar Navne", year:"SY", role:"Spiker"},
    {name:"Aniket Mhetar", year:"SY", role:"Setter"},
    {name:"Aniruddh Nalli", year:"BTECH", role:"Libero"},
    {name:"Arnav Ghatandrekarr", year:"FY", role:"Spiker"},
    {name:"Avinash Bhadange", year:"MTECH", role:"All-Rounder"},
    {name:"Bhavesh Shah", year:"FY", role:"Libero"},
    {name:"Daksh Kotak", year:"FY", role:"Libero"},
    {name:"Kartik Kendre", year:"SY", role:"Spiker"},
    {name:"Mayur Badgujar", year:"FY", role:"Setter"},
    {name:"Om Jaiswal", year:"BTECH", role:"All-Rounder"}
];

let roles = ["Spiker","Setter","Libero","All-Rounder"];

let currentRoleIndex = 0;
let currentPlayers = [];
let currentPlayerIndex = 0;

function initAuction(){
    loadRole();
    updateTeams();
}

function loadRole(){
    if(currentRoleIndex >= roles.length){
        document.getElementById("playerCard").innerHTML = "<h2>Auction Completed</h2>";
        document.getElementById("setTitle").innerText = "";
        return;
    }

    let role = roles[currentRoleIndex];
    document.getElementById("setTitle").innerText = "Current Set: " + role;

    currentPlayers = players.filter(p => p.role === role);
    currentPlayerIndex = 0;

    if(currentPlayers.length === 0){
        currentRoleIndex++;
        loadRole();
    } else {
        showPlayer();
    }
}

function showPlayer(){

    if(currentPlayerIndex >= currentPlayers.length){
        currentRoleIndex++;
        loadRole();
        return;
    }

    let p = currentPlayers[currentPlayerIndex];
    let base = (p.year === "FY") ? 1 : 2;
    let imgName = p.name.replace(/ /g,"_") + ".jpg";

    document.getElementById("playerCard").innerHTML =
        "<img src='images/" + imgName + "' onerror=\"this.src='https://via.placeholder.com/200';\">" +
        "<h2>" + p.name + "</h2>" +
        "<p><b>Role:</b> " + p.role + "</p>" +
        "<p><b>Year:</b> " + p.year + "</p>" +
        "<p><b>Base Price:</b> " + base + " Cr</p>";
}

function nextPlayer(){
    currentPlayerIndex++;
    showPlayer();
}

function sellPlayer(){

    let bid = parseFloat(document.getElementById("bidAmount").value);
    let teamName = document.getElementById("teamSelect").value;
    let team = teams[teamName];

    if(currentPlayerIndex >= currentPlayers.length){
        alert("No player left in this set!");
        return;
    }

    if(!bid){
        alert("Enter bid amount!");
        return;
    }

    if(team.purse < bid){
        alert("Not enough purse!");
        return;
    }

    let player = currentPlayers[currentPlayerIndex];

    team.purse -= bid;
    team.players.push(player.name + " (" + bid + " Cr)");
    updateTeams();

    currentPlayerIndex++;
    showPlayer();
}

function updateTeams(){
    for(let t in teams){
        document.getElementById(t).innerHTML =
            "<h3>" + t + "</h3>" +
            "<p>Purse: " + teams[t].purse.toFixed(1) + " Cr</p>" +
            teams[t].players.join("<br>");
    }
}

initAuction();

</script>

</body>
</html>
