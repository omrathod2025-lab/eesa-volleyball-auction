<!DOCTYPE html>
<html>
<head>
    <title>EESA Auctioneer Master</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        :root { --gold: #ffd700; --sold: #00ff88; --unsold: #ff4444; }
        body { 
            font-family: 'Poppins', Arial, sans-serif; 
            background: radial-gradient(circle, #203a43, #0f2027); 
            color:white; text-align:center; margin:0; padding-bottom: 50px;
        }
        #connStatus { padding:10px; font-size:12px; opacity:0.6; color: var(--sold); }
        h1 { letter-spacing: 5px; text-transform: uppercase; margin: 20px 0; }
        
        /* Glassmorphism Player Card */
        #playerCard { 
            margin:20px auto; width:450px; background: rgba(255, 255, 255, 0.05); 
            backdrop-filter: blur(15px); padding:30px; border-radius:30px; 
            border: 2px solid rgba(255, 215, 0, 0.3); box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .player-img { width:250px; height:250px; object-fit:cover; border-radius:20px; border: 4px solid var(--gold); }

        /* Animations */
        .sold-effect { animation: gavelSlam 0.6s ease-in-out; border-color: var(--sold) !important; box-shadow: 0 0 60px var(--sold) !important; }
        .unsold-effect { filter: grayscale(1); border-color: var(--unsold) !important; box-shadow: 0 0 60px var(--unsold) !important; }
        @keyframes gavelSlam {
            0% { transform: scale(1); }
            50% { transform: scale(1.15) rotate(-3deg); }
            100% { transform: scale(1); }
        }

        .banner { font-size: 45px; font-weight: 900; height: 60px; text-transform: uppercase; margin: 15px 0; }
        .container { display:flex; justify-content:center; gap: 15px; padding: 20px; flex-wrap: wrap; }
        .team { width:220px; background: rgba(0,0,0,0.6); padding:15px; border-radius:15px; border-bottom: 5px solid var(--gold); }
        .team img { width: 60px; height: 60px; margin-bottom: 10px; }

        .controls { background: rgba(0,0,0,0.4); padding: 20px; border-top: 1px solid rgba(255,255,255,0.1); }
        button { padding:12px 25px; border-radius:5px; border:none; font-weight:bold; cursor:pointer; text-transform:uppercase; margin: 5px; color: white; }
        #sellBtn { background: var(--sold); color: black; }
        #unsoldBtn { background: var(--unsold); }
        .nav-btn { background: #444; }
        input, select { padding:12px; border-radius:5px; border:none; font-size: 16px; }
    </style>
</head>
<body>

<div id="connStatus">Initializing...</div>
<h1>üèê EESA VOLLEYBALL AUCTION</h1>
<h2 id="setTitle" style="color: var(--gold);"></h2>

<div class="banner" id="banner"></div>
<div id="playerCard"></div>

<div class="controls">
    <select id="teamSelect">
        <option>Zhanzhanit Smashers</option>
        <option>Vajra Warriors</option>
        <option>Dhasu Spikers</option>
        <option>Elev8</option>
    </select>
    <input type="number" id="bidAmount" placeholder="Bid (Cr)">
    <button id="sellBtn" onclick="sellPlayer()">Sold</button>
    <button id="unsoldBtn" onclick="unsoldPlayer()">Unsold</button>
    <br>
    <button class="nav-btn" onclick="undoAction()">Undo</button>
    <button class="nav-btn" onclick="prevPlayer()">Back</button>
    <button class="nav-btn" onclick="nextPlayer()">Skip</button>
    <button onclick="resetAuction()" style="background:maroon;">Reset</button>
</div>

<div class="container">
    <div class="team" id="Zhanzhanit Smashers"></div>
    <div class="team" id="Vajra Warriors"></div>
    <div class="team" id="Dhasu Spikers"></div>
    <div class="team" id="Elev8"></div>
</div>

<script>
    const peer = new Peer('eesa-auction-2026'); 
    let connections = [];
    let auctionHistory = [];

    let teams = {
        "Zhanzhanit Smashers": { purse: 60, players: [], logo: "images/smashers_logo.png.jpeg" },
        "Vajra Warriors": { purse: 60, players: [], logo: "images/warriors_logo.png.jpeg" },
        "Dhasu Spikers": { purse: 60, players: [], logo: "images/spikers.logo.png.jpeg" },
        "Elev8": { purse: 60, players: [], logo: "images/Elev8_logo.png.jpeg" }
    };

    let players=[
        {n:"Shrivardhan Deshmukh",y:"TY",r:"Libero"}, {n:"Pushkar Joshi",y:"FY",r:"Setter"},
        {n:"Mayur Badgujar",y:"FY",r:"Setter"}, {n:"Navne Amar Maharudra",y:"SY",r:"All-Rounder"},
        {n:"Swayam Pankaj Kitukale",y:"FY",r:"All-Rounder"}, {n:"Kevin Pooniwala",y:"TY",r:"Spiker"},
        {n:"Bhavesh Shah",y:"FY",r:"Libero"}, {n:"Daksh Rajesh Kotak",y:"FY",r:"Libero"},
        {n:"Sarthak Gawde",y:"SY",r:"Setter"}, {n:"Aditya Jadhav",y:"TY",r:"Spiker"},
        {n:"Sohan Prashant Mestry",y:"FY",r:"All-Rounder"}, {n:"Shyam Bhutnar",y:"SY",r:"All-Rounder"},
        {n:"Aniket Mhetar",y:"SY",r:"Setter"}, {n:"Muneshwar Pravin Patil",y:"SY",r:"All-Rounder"},
        {n:"Prathmesh Kadam",y:"TY",r:"All-Rounder"}, {n:"Shailesh Shikarkhane",y:"SY",r:"All-Rounder"},
        {n:"Adwait Atul Deshpande",y:"FY",r:"All-Rounder"}, {n:"Asit Mangesh Bansode",y:"SY",r:"All-Rounder"},
        {n:"Stuti Athani",y:"TY",r:"All-Rounder"}, {n:"Aditya Prashant Thakur",y:"FY",r:"Spiker"},
        {n:"Narendra Prabhakar Khirade",y:"FY",r:"Setter"}, {n:"Harshwardhan Devkule",y:"FY",r:"Libero"},
        {n:"Arnav Ghatnandrekar",y:"FY",r:"Spiker"}, {n:"Kartik Arote",y:"SY",r:"Libero"},
        {n:"Kartik Kendre",y:"TY",r:"All-Rounder"}, {n:"Harshvardhan Mahesh Mohite",y:"FY",r:"All-Rounder"},
        {n:"Ian Dias",y:"TY",r:"Spiker"}, {n:"Guru Patil",y:"TY",r:"Setter"},
        {n:"Kartik Nilesh Bhure",y:"FY",r:"Setter"}, {n:"Roshan Rambhau Gudge",y:"FY",r:"All-Rounder"},
        {n:"Navinkumar Khanande",y:"SY",r:"Spiker"}, {n:"Avinash Santosh Bhadange",y:"MTECH",r:"Spiker"},
        {n:"Vivek Kamble",y:"FY",r:"Spiker"}, {n:"Vedant Vijay Khalokar",y:"FY",r:"Spiker"},
        {n:"Advay Sachin Saraf",y:"SY",r:"Libero"}, {n:"Nandish Panchal",y:"FY",r:"All-Rounder"},
        {n:"Vedant Sangewar",y:"FY",r:"Libero"}, {n:"Omkar Shivdarshan Majge",y:"TY",r:"All-Rounder"},
        {n:"Harshal Chinchore",y:"MTECH",r:"All-Rounder"}, {n:"Abhigyan Mishra",y:"FY",r:"Spiker"},
        {n:"Darshith Bodkhe",y:"TY",r:"Libero"}, {n:"Viraj Pawar",y:"MTECH",r:"Setter"},
        {n:"Merudatta",y:"MTECH",r:"Spiker"}, {n:"Sairam Revagade",y:"FY",r:"Libero"},
        {n:"Aniruddh Nalli",y:"BTECH",r:"Libero"}, {n:"Sanket Patil",y:"MTECH",r:"Spiker"},
        {n:"Om Mukesh Jaiswal",y:"BTECH",r:"Setter"}, {n:"Rushikesh Kishor Patil",y:"BTECH",r:"All-Rounder"},
        {n:"Harshwardhan Yashwant Patil",y:"BTECH",r:"Spiker"}, {n:"Branden Colaco",y:"TY",r:"Libero"},
        {n:"Rahul Chindarkar",y:"TY",r:"All-Rounder"}, {n:"Shravani Gurav",y:"FY",r:"Libero"},
        {n:"Aditya Shinde",y:"TY",r:"Spiker"}, {n:"Pallavi Parmeshwar Golhar",y:"TY",r:"Setter"},
        {n:"Siddhen Bhushan Mahajan",y:"TY",r:"Setter"}, {n:"Jai Sheth",y:"FY",r:"Libero"},
        {n:"Gaurav Yadav",y:"TY",r:"Libero"}, {n:"Yash Chinchwade",y:"TY",r:"Libero"},
        {n:"Shubham Manohar Chavan",y:"MTECH",r:"All-Rounder"}
    ];

    let roles=["Spiker","Setter","Libero","All-Rounder"];
    let roleIndex=0; let currentPlayers=[]; let playerIndex=0;

    peer.on('open', id => { document.getElementById('connStatus').innerText = "‚úÖ ONLINE"; });
    peer.on('connection', conn => { connections.push(conn); conn.on('open', () => syncData()); });

    function syncData() {
        let state = { currentP: currentPlayers[playerIndex], teams: teams, banner: document.getElementById("banner").innerText };
        connections.forEach(c => { if(c.open) c.send(state); });
    }

    function init(){ loadRole(); updateTeams(); }

    function loadRole(){
        if(roleIndex >= roles.length) return;
        currentPlayers = players.filter(p=>p.r===roles[roleIndex]);
        playerIndex = 0;
        document.getElementById("setTitle").innerText = roles[roleIndex];
        showPlayer();
    }

    function showPlayer(){
        if(playerIndex >= currentPlayers.length){ roleIndex++; loadRole(); return;}
        let p = currentPlayers[playerIndex];
        let base = (p.y==="FY")?1:2;
        let img = p.n.replace(/ /g,"_")+".jpg";
        document.getElementById("playerCard").innerHTML=
        `<img class="player-img" src='images/${img}' onerror="this.src='https://via.placeholder.com/250?text=PHOTO';">`+
        `<h2>${p.n}</h2><p>${p.r} | ${p.y}</p><h3 style="color:var(--gold)">Base: ${base} Cr</h3>`;
        syncData();
    }

    function sellPlayer() {
        let bid = parseFloat(document.getElementById("bidAmount").value);
        let teamName = document.getElementById("teamSelect").value;
        if(!bid) return alert("Enter Bid!");

        auctionHistory.push(JSON.parse(JSON.stringify({ teams: teams, playerIndex: playerIndex, roleIndex: roleIndex })));
        
        teams[teamName].purse -= bid;
        teams[teamName].players.push(`${currentPlayers[playerIndex].n} (${bid}Cr)`);

        document.getElementById("banner").innerText = "SOLD TO " + teamName;
        document.getElementById("banner").style.color = "var(--sold)";
        document.getElementById("playerCard").classList.add("sold-effect");

        updateTeams();
        syncData();

        setTimeout(() => {
            document.getElementById("playerCard").classList.remove("sold-effect");
            document.getElementById("banner").innerText = "";
            playerIndex++; showPlayer();
            document.getElementById("bidAmount").value = "";
        }, 2000);
    }

    function unsoldPlayer() {
        document.getElementById("banner").innerText = "UNSOLD";
        document.getElementById("banner").style.color = "var(--unsold)";
        document.getElementById("playerCard").classList.add("unsold-effect");
        syncData();
        setTimeout(() => {
            document.getElementById("playerCard").classList.remove("unsold-effect");
            document.getElementById("banner").innerText = "";
            playerIndex++; showPlayer();
        }, 1500);
    }

    function undoAction() {
        if (auctionHistory.length === 0) return;
        let prev = auctionHistory.pop();
        teams = prev.teams; playerIndex = prev.playerIndex; roleIndex = prev.roleIndex;
        updateTeams(); showPlayer();
    }

    function nextPlayer(){ playerIndex++; showPlayer(); }
    function prevPlayer(){ if(playerIndex > 0) { playerIndex--; showPlayer(); } }
    function resetAuction() { if(confirm("Reset?")) location.reload(); }

    function updateTeams(){
        for(let t in teams){
            document.getElementById(t).innerHTML = 
            `<img src="${teams[t].logo}" onerror="this.style.display='none'"><br><b>${t}</b><br>` +
            `Purse: <span style="color:var(--sold)">${teams[t].purse.toFixed(1)} Cr</span><hr style="opacity:0.2">` + 
            `<small>${teams[t].players.join(", ")}</small>`;
        }
    }
    init();
</script>
</body>
</html>
